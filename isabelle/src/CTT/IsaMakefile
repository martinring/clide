#
# IsaMakefile for CTT
#

## targets

default: CTT
images: CTT
test: CTT-ex
all: images test
full: all
smlnj: all


## global settings

SRC = $(ISABELLE_HOME)/src
OUT = $(ISABELLE_OUTPUT)
LOG = $(OUT)/log


## CTT

CTT: Pure $(OUT)/CTT

Pure:
	@cd $(SRC)/Pure; $(ISABELLE_TOOL) make Pure

$(OUT)/CTT: $(OUT)/Pure $(SRC)/Provers/typedsimp.ML Arith.thy \
  Bool.thy CTT.thy Main.thy ROOT.ML rew.ML
	@$(ISABELLE_TOOL) usedir -b $(OUT)/Pure CTT


## CTT-ex

CTT-ex: CTT $(LOG)/CTT-ex.gz

$(LOG)/CTT-ex.gz: $(OUT)/CTT ex/ROOT.ML ex/Elimination.thy \
  ex/Equality.thy ex/Synthesis.thy ex/Typechecking.thy
	@$(ISABELLE_TOOL) usedir $(OUT)/CTT ex


## clean

clean:
	@rm -f $(OUT)/CTT $(LOG)/CTT.gz $(LOG)/CTT-ex.gz
