#
# IsaMakefile for CCL
#

## targets

default: CCL
images: CCL
test: CCL-ex
all: images test
full: all
smlnj: all


## global settings

SRC = $(ISABELLE_HOME)/src
OUT = $(ISABELLE_OUTPUT)
LOG = $(OUT)/log


## CCL

CCL: FOL $(OUT)/CCL

FOL:
	@cd $(SRC)/FOL; $(ISABELLE_TOOL) make FOL

$(OUT)/FOL: FOL

$(OUT)/CCL: $(OUT)/FOL CCL.thy Fix.thy Gfp.thy Hered.thy Lfp.thy ROOT.ML \
  Set.thy Term.thy Trancl.thy Type.thy Wfd.thy
	@$(ISABELLE_TOOL) usedir -b -r $(OUT)/FOL CCL


## CCL-ex

CCL-ex: CCL $(LOG)/CCL-ex.gz

$(LOG)/CCL-ex.gz: $(OUT)/CCL ex/Flag.thy ex/List.thy ex/Nat.thy ex/ROOT.ML \
  ex/Stream.thy
	@$(ISABELLE_TOOL) usedir $(OUT)/CCL ex


## clean

clean:
	@rm -f $(OUT)/CCL $(LOG)/CCL.gz $(LOG)/CCL-ex.gz
