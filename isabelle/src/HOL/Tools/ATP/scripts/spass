#!/usr/bin/env bash
#
# Wrapper for SPASS that also outputs the Flotter-generated CNF (needed for
# Isar proof reconstruction)
#
# Author: Jasmin Blanchette, TU Muenchen

options=${@:1:$(($#-1))}
name=${@:$(($#)):1}
home=${SPASS_OLD_HOME:-$SPASS_HOME}

"$home/SPASS" -Flotter "$name" \
    | sed 's/description({$/description({*/' \
    | sed 's/set_ClauseFormulaRelation()\.//' \
    > $name.cnf
cat $name.cnf
"$home/SPASS" $options "$name.cnf" \
    | sed 's/\(Formulae used in the proof :\).*/\1 N\/A/'
rm -f "$name.cnf"
